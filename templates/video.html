<html>
    {% if theme == 'darkly' %}
        <link href="/assets/css/darkly.css" rel="stylesheet">
    {% elif theme == 'united' %}
        <link href="/assets/css/united.css" rel="stylesheet">
    {% elif theme == 'journal' %}
        <link href="/assets/css/journal.css" rel="stylesheet">
    {% elif theme == 'readable' %}
        <link href="/assets/css/readable.css" rel="stylesheet">
    {% endif %}
    <link href="/assets/css/waiter.css" rel="stylesheet">
    <head>
        <link rel="shortcut icon" type="image/png" href="/assets/favicon.ico"/>
        <!-- <link href="/assets/video-js/responsive-video-js.css" rel="stylesheet"> -->
        <link href="https://vjs.zencdn.net/c/video-js.css" rel="stylesheet"> <!-- Uncomment above to host locally -->
        {% if title %}
        <title>Alfred - {{title}}</title>
        {% else %}
        <title>Alfred v1.0</title>
        {% endif %}

        <div class="container container-header">
            {% if title %}
            <h1>Alfred - {{title}}</h1>
            {% else %}
            <h1>Alfred v1.0</h1>
            {% endif %}
        </div>
    </head>
    <body>
        <div class="container">
            <div class="row">
                    <video id="video1" class="video-js vjs-default-skin vjs-big-play-centered"
                        controls
                        preload="auto">
                    <source src="{{ video_file }}" type="video/mp4" />
                    <p class="vjs-no-js">Sorry, your browser doesn't support HTML5 video.</p>
                    </video>
            </div>
            <div class="row">
                <div class="col-xs-12">
                    <div class="text-center" id="viewedText"></div>
                </div>
            </div>
        </div>
        <script type="text/javascript">
        </script>
    </body>
</html>
<script src="/assets/js/jquery-1.10.1.min.js"></script>
<!-- <script src="/assets/video-js/responsive-video.js"></script> -->
<script src="https://vjs.zencdn.net/c/video.js"></script> <!-- Uncomment the above to host locally -->
<script src="/assets/js/waiter.js"></script>
<script>
    $(document).ready(function (){
        viewedUrl = '{{ viewedUrl }}';
        guid = '{{ guid }}';
        offsetUrl = '{{ offsetUrl }}';

        _V_("video1").ready(function(){

          var offset = getVideoPosition('{{filename}}', guid, this);
          var myPlayer = this;    // Store the video object
          var aspectRatio = 9/16; // Make up an aspect ratio

          function resizeVideoJS(){
            // Get the parent element's actual width
            var width = document.getElementById(myPlayer.id).parentElement.offsetWidth;
            // Set width to fill parent element, Set height
            myPlayer.width(width).height( width * aspectRatio );
          }

          resizeVideoJS(); // Initialize the function
          window.onresize = resizeVideoJS; // Call the function on resize

          //myPlayer.play();
          //myPlayer.pause();
          //if(offset){
          //    myPlayer.currentTime(offset);
          //}

          setupVideoPlayerPage('{{filename}}');

          this.play();
        });
    });

</script>
