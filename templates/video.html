<html>
    <link href="/bower_components/waiter.css" rel="stylesheet">
    <head>
        <link rel="shortcut icon" type="image/png" href="/bower_components/favicon.ico"/>
        <!-- <link href="/bower_components/video-js/responsive-video-js.css" rel="stylesheet"> -->
        <link href="https://vjs.zencdn.net/c/video-js.css" rel="stylesheet"> <!-- Uncomment above to host locally -->
        {% if title %}
        <title>Alfred - {{title}}</title>
        {% else %}
        <title>Alfred v1.0</title>
        {% endif %}

        <div class="container container-header">
            {% if title %}
            <h1>Alfred - {{title}}</h1>
            {% else %}
            <h1>Alfred v1.0</h1>
            {% endif %}
        </div>
    </head>
    <body>
        <div class="container">
            <div class="row">
                    <video id="video1" class="video-js vjs-default-skin vjs-big-play-centered"
                            controls
                            preload="auto">

                        <source src="{{ video_file }}" type="video/mp4" />
                        {% if subtitle_file %}
                        <track id="text1" label="English" kind="subtitles" srclang="en" src="{{ subtitle_file }}">
                        {% endif %}
                        <p class="vjs-no-js">Sorry, your browser doesn't support HTML5 video.</p>
                    </video>
            </div>
            <div class="row">
                <div class="col-xs-12">
                    <div class="text-center" id="viewedText"></div>
                </div>
            </div>
        </div>
        <script type="text/javascript">
        </script>
    </body>
</html>
<script src="/bower_components/jquery/dist/jquery.min.js"></script>
<!-- <script src="/bower_components/video-js/responsive-video.js"></script> -->
<script src="https://vjs.zencdn.net/c/video.js"></script> <!-- Uncomment the above to host locally -->
<script src="/bower_components/waiter_v2.js"></script>
<script>
    $(document).ready(function (){
        viewedUrl = '{{ viewedUrl }}';
        guid = '{{ guid }}';
        offsetUrl = '{{ offsetUrl }}';
        dirPath = '{{ dirPath }}';

        _V_("video1").ready(function(){

          var offset = getVideoPosition('{{dirPath}}', guid, this);
          var myPlayer = this;    // Store the video object
          var aspectRatio = 9/16; // Make up an aspect ratio

          function resizeVideoJS(){
            // Get the parent element's actual width
            var width = document.getElementById(myPlayer.id).parentElement.offsetWidth;
            // Set width to fill parent element, Set height
            myPlayer.width(width).height( width * aspectRatio );
          }

          resizeVideoJS(); // Initialize the function
          window.onresize = resizeVideoJS; // Call the function on resize

          setupVideoPlayerPage('{{dirPath}}');

          this.play();
        });
    });

</script>
